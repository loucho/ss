<div class="page-header">
    <h1>Find Realtors</h1>
</div>
<div class="alert alert-warning alert-dismissible" role="alert">
    <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span
            class="sr-only">Close</span></button>
    <strong>Warning!</strong> Unfortunately, every Board's server (RETS) handles data differently, so the results for
    this search will vary wildly from one Board to another.
    Also, be warned that some boards are case sensitive, while others are not... yeah, I know =/
</div>
<div class="row">
    <div class="col-xs-12">
        <tabset>
            <tab select="clearId()">
                <tab-heading>
                    <i class="glyphicon glyphicon-user"></i> Find by Name
                </tab-heading>
                <div class="row">
                    <div class="col-xs-3">
                        <label for="name-board">Board:</label>
                        <select id="name-board" ng-model="query.board" class="form-control"
                                ng-options="board.code as board.name for board in boards">
                        </select>
                    </div>
                    <div class="col-xs-4">
                        <label for="first-name">First Name:</label>
                        <input id="first-name" type="text" class="form-control" ng-model="query.firstName"
                               placeholder="First Name">
                    </div>
                    <div class="col-xs-4">
                        <label for="last-name">Last Name:</label>
                        <input id="last-name" type="text" class="form-control" ng-model="query.lastName"
                               placeholder="Last Name">
                    </div>
                    <div class="col-xs-1">
                        <label for="name-submit"></label>
                        <button id="name-submit" type="button" class="btn btn-primary" ng-click="submit()">Search
                        </button>
                    </div>
                </div>
            </tab>
            <tab select="clearName()">
                <tab-heading>
                    <i class="glyphicon glyphicon-barcode"></i> Find by ID
                </tab-heading>
                <div class="row">
                    <div class="col-xs-6">
                        <label for="ID-board">Board:</label>
                        <select id="ID-board" ng-model="query.board" class="form-control"
                                ng-options="board.code as board.name for board in boards">
                        </select>
                    </div>
                    <div class="col-xs-5">
                        <label for="id">ID:</label>
                        <input id="id" type="text" class="form-control" ng-model="query.id" placeholder="ID">
                    </div>
                    <div class="col-xs-1">
                        <label for="ID-submit"></label>
                        <button id="ID-submit" type="button" class="btn btn-primary" ng-click="submit()">Search</button>
                    </div>
                </div>
            </tab>
        </tabset>
    </div>
</div>
<div class="row">
    <div class="col-xs-12">
        <hr>
    </div>
</div>
<div class="row">
    <div class="col-xs-12">
        <accordion>
            <accordion-group is-open="status.open">
                <accordion-heading>
                    Debug Information <i class="pull-right glyphicon"
                                         ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i>
                </accordion-heading>
                <div id="debug-error" class="well" ng-show="response.error">
                    <p>Error: {{response.error}}</p>

                    <p>Message: {{response.message}}</p>
                </div>
                <div id="debug-error-list" class="well">
                    Error List:
                    <ul>
                        <li ng-repeat="error in response.errors">{{error}}</li>
                    </ul>
                </div>
                <div id="debug-dmql" class="well">
                    DMQL list:
                    <ul>
                        <li ng-repeat="dmql in response.DMQLs">{{dmql}}</li>
                    </ul>
                </div>
                <div id="debug-feeds" class="well">
                    Feeds queried:
                    <ul>
                        <li ng-repeat="feed in response.feeds">{{feed}}</li>
                    </ul>
                </div>
            </accordion-group>
        </accordion>
    </div>
</div>
<div class="row" ng-switch on="response.agents.length">
    <div ng-switch-when="0" ng-switch on="isLoading()">
        <em ng-switch-default>Loading...</em>
        <em ng-switch-when="0">No realtors fit that criteria, sorry =(</em>
    </div>
    <div ng-switch-default id="realtors" class="container-fluid">
        <p class="text-center">There were {{response.results}} matches</p>

        <div class="panel panel-info" ng-repeat="agent in response.agents">
            <div class="panel-heading">Agent</div>
            <table class="table">
                <tr>
                    <th>Atribute</th>
                    <th>Value</th>
                </tr>
                <tr ng-repeat="(key,value) in agent">
                    <td>{{key}}</td>
                    <td>{{value}}</td>
                </tr>
            </table>
        </div>
    </div>
</div>